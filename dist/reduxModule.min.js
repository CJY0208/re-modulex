"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),REACT_STATICS={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=getPrototypeOf&&getPrototypeOf(Object);function hoistNonReactStatics(e,t,r){if("string"==typeof t)return e;if(objectPrototype){var n=getPrototypeOf(t);n&&n!==objectPrototype&&hoistNonReactStatics(e,n,r)}var o=getOwnPropertyNames(t);getOwnPropertySymbols&&(o=o.concat(getOwnPropertySymbols(t)));for(var i=0;i<o.length;++i){var a=o[i];if(!(REACT_STATICS[a]||KNOWN_STATICS[a]||r&&r[a])){var u=getOwnPropertyDescriptor(t,a);try{defineProperty(e,a,u)}catch(e){}}}return e}var hoistNonReactStatics_cjs=hoistNonReactStatics,__modules={},getModules=function(){return __modules},hasModule=function(e){return!!__modules[e]},saveModule=function(e,t){__modules[e]=t},isUndefined=function(e){return void 0===e},isFunction=function(e){return"function"==typeof e},isString=function(e){return"string"==typeof e},get=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];try{var n=(isString(t)?t.split("."):t).reduce(function(e,t){return e[t]},e);return isUndefined(n)?r:n}catch(e){return r}},run=function(e){for(var t=arguments.length,r=Array(2<t?t-2:0),n=2;n<t;n++)r[n-2]=arguments[n];var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];o=isString(o)?o.split("."):o;var i=get(e,o),a=get(e,o.slice(0,-1));return isFunction(i)?i.call.apply(i,[a].concat(r)):i},value=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){return isUndefined(e)?run(t):run(e)},void 0)},__redux__store={},applyStore=function(e){Object.assign(__redux__store,e)},dispatch=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return run.apply(void 0,[__redux__store,"dispatch"].concat(t))},getState=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return run.apply(void 0,[__redux__store,"getState"].concat(t))},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),defineProperty$1=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_React$createContext=React__default.createContext(),Provider=_React$createContext.Provider,Consumer=_React$createContext.Consumer,ModuleProvider=function(e){function a(){var e,t,r;classCallCheck(this,a);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=r=possibleConstructorReturn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).state=r.props.store.getState(),r.listener=function(){return r.setState(r.props.store.getState())},possibleConstructorReturn(r,t)}return inherits(a,e),createClass(a,[{key:"componentDidMount",value:function(){var e=this.props.store;applyStore(e),this.unsubscibe=e.subscribe(this.listener)}},{key:"componentWillUnmount",value:function(){run(this.unsubscibe)}},{key:"render",value:function(){return React__default.createElement(Provider,{value:this.state},this.props.children)}}]),a}(React.Component),connectModules=function(r){return function(t){var e=function(e){return React__default.createElement(Consumer,null,function(s){return React__default.createElement(t,_extends({},e,Object.entries(value(run(r,void 0,getModules()),{})).reduce(function(e,t){var r=slicedToArray(t,2),n=r[0],o=r[1],i=o.dispatch,a=o.commit,u=o.compute,c=(o.name,o.findModuleState);return _extends({},e,defineProperty$1({},n,value(function(){var e=c(s);return{state:e,getters:u(e),dispatch:i,commit:a}})))},{})))})};return e.displayName="HOC_ReduxModule("+value(t.displayName,t.name)+")",hoistNonReactStatics_cjs(e,t)}},__splitter="Y(^_^)Y",combine=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join(__splitter)},split=function(e,r){return e.split(__splitter).reduce(function(e,t){return _extends({},e,defineProperty$1({},t,r))},{})},ReduxModule=function e(t){var a=this,r=t.name,n=(t.getReducers,t.getters),o=t.state,i=t.actions,u=t.mutations;if(classCallCheck(this,e),this.dispatch=function(){for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return run.apply(void 0,[a.actions,n.replace(/\//g,".")].concat(t))},this.commit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];dispatch({type:a.name+"::"+e,payload:t})},this.compute=function(i){return Object.entries(a.computer).reduce(function(e,t){var r=slicedToArray(t,2),n=r[0],o=r[1];return _extends({},e,defineProperty$1({},n,o(i)))},{})},this.findModuleState=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:getState();if(e.__reduxModuleName===a.name)return e;if(a.__storeKeyCache){var t=get(e,a.__storeKeyCache);if(get(t,"__reduxModuleName")===a.name)return t}var r=Object.entries(e).find(function(e){var t=slicedToArray(e,2),r=(t[0],t[1]);return get(r,"__reduxModuleName")===a.name}),n=slicedToArray(r,2),o=n[0],i=n[1];return a.__storeKeyCache=o,i},hasModule(r))throw new Error("\n        [Creating ReduxModule Error] Duplicated module named '"+r+"'\n      ");var c=Object.assign({__reduxModuleName:r},o),s=new RegExp("^"+r+"::"),l=Object.entries(run(u,void 0,{combine:combine})).reduce(function(e,t){var r=slicedToArray(t,2),n=r[0],o=r[1];return _extends({},e,split(n,o))},{});saveModule(r,Object.assign(this,{name:r,computer:n,actions:run(i,void 0,{getModules:getModules,dispatch:this.dispatch,commit:this.commit,getState:this.findModuleState,getReduxState:getState}),reducer:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1],r=t.type,n=t.payload;return _extends({},e,run(l,r.replace(s,""),e,n))}}))},createModule=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(ReduxModule,[null].concat(t)))};exports.createModule=createModule,exports.ModuleProvider=ModuleProvider,exports.connectModules=connectModules;

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.ReModulex={},e.React)}(this,function(e,r){"use strict";var a="default"in r?r.default:r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),d=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e){return void 0===e},i=function(e){return"function"==typeof e},h=function(e){return e instanceof Array},c=function(e){return"string"==typeof e},m=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];try{var n=(c(t)?t.split("."):t).reduce(function(e,t){return e[t]},e);return o(n)?r:n}catch(e){return r}},b=function(e){for(var t=arguments.length,r=Array(2<t?t-2:0),n=2;n<t;n++)r[n-2]=arguments[n];var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];o=c(o)?o.split("."):o;var a=m(e,o),u=m(e,o.slice(0,-1));return i(a)?a.call.apply(a,[u].concat(r)):a},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){return o(e)?b(t):b(e)},void 0)},g={},O=function(){return g},u=function(e,f){if(h(e)){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e));e=function(r){return t.reduce(function(e,t){return r[t]?y({},e,d({},t,r[t])):e},{})}}var r=l(b(e,void 0,O()),{});return Object.entries(r).reduce(function(e,t){var r=v(t,2),n=r[0],o=r[1],a=o.dispatch,u=o.commit,i=o.compute,c=o.getState;return y({},e,d({},n,l(function(){var e=c(f);return{getState:c,getComputed:function(){return i(c())},dispatch:a,commit:u,state:e,getters:i(e)}})))},{})},f=void 0,n=function(n){return function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return f||console.error(new Error("\n      [ReModulex Error] \n        Forgot to apply the store?\n        Use 'ReModulex.applyStore' with your redux store!\n    ")),b.apply(void 0,[n,void 0].concat(t))}},w=function(e){f=e},j=n(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return b.apply(void 0,[f,"dispatch"].concat(t))}),x=n(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return b.apply(void 0,[f,"getState"].concat(t))}),M="Y(^_^)Y",S=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join(M)},P=function e(t){var r,i=t.name,n=t.state,o=function(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["name","state"]);if(p(this,e),_.call(this),g[i])throw new Error("\n        [Creating ReModulex Error] Duplicated module named '"+i+"'\n      ");if("object"!==(void 0===(r=n)?"undefined":s(r))||h(r)||null===r)throw new Error("\n        [Creating ReModulex Error] Initial state must be an Object!\n      ");var a,u,c=y({__ReModulexName:i},n),f=Object.entries(b(o,"mutations",{combine:S})).reduce(function(e,t){var r,n,o=v(t,2),a=o[0],u=o[1];return y({},e,(r=u,n=i,a.split(M).reduce(function(e,t){return y({},e,d({},n+"::"+t,r))},{})))},{}),l=b(o,"actions",{getModules:O,getStoreState:x,dispatch:this.dispatch,commit:this.commit,getState:this.getState});a=i,u=Object.assign(this,{name:i,getters:m(o,"getters",{}),actions:l,reducer:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1],r=t.type,n=t.payload;return y({},e,b(f,r,e,n))}}),g[a]=u,Object.assign(this.dispatch,l)},_=function(){var i=this;this.dispatch=function(){for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return b.apply(void 0,[i.actions,n.split("/")].concat(t))},this.commit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return j({type:i.name+"::"+e,payload:t})},this.compute=function(t){var a,u,e,r=(a=function(e){return b(i.getters,e,t,r)},u=new Map,(e=function(e){if(u.has(e))return u.get(e);for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=a.call.apply(a,[this,e].concat(r));return u.set(e,o),o}).cache=u,e);return Object.keys(i.getters).reduce(function(e,t){return y({},e,d({},t,r(t)))},{})},this.getState=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:x();if(e.__ReModulexName===i.name)return e;var t=m(e,i.__storeKeyCache);if(m(t,"__ReModulexName")===i.name)return t;var r=Object.entries(e).find(function(e){var t=v(e,2),r=(t[0],t[1]);return m(r,"__ReModulexName")===i.name}),n=v(r,2),o=n[0],a=n[1];return i.__storeKeyCache=o,a}},A={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},R={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},C=Object.defineProperty,E=Object.getOwnPropertyNames,N=Object.getOwnPropertySymbols,T=Object.getOwnPropertyDescriptor,k=Object.getPrototypeOf,D=k&&k(Object);var I=function e(t,r,n){if("string"==typeof r)return t;if(D){var o=k(r);o&&o!==D&&e(t,o,n)}var a=E(r);N&&(a=a.concat(N(r)));for(var u=0;u<a.length;++u){var i=a[u];if(!(A[i]||R[i]||n&&n[i])){var c=T(r,i);try{C(t,i,c)}catch(e){}}}return t},U=l(function(){try{return r.createContext()}catch(e){return console.warn(new Error("\n      [ReModulex Environment Waring] \n        'createContext' API is not supported by your React version. \n        'ModuleProvider' and 'connectModules' would NOT effect.\n        Use 'applyStore' and 'mapModules' with 'Provider' and 'connect' in react-redux instead.        \n    ")),{Provider:function(e){var t=e.children;return b(t)},Consumer:function(e){var t=e.children;return b(t)}}}}),F=U.Provider,W=U.Consumer,Y=function(e){function i(e){var t;p(this,i);for(var r=e.store,n=arguments.length,o=Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this,e].concat(o)));return u.state=u.props.store.getState(),w(r),u.unsubscibe=r.subscribe(function(){return u.setState(u.props.store.getState())}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r.Component),t(i,[{key:"componentWillUnmount",value:function(){b(this.unsubscibe)}},{key:"render",value:function(){return a.createElement(F,{value:this.state},this.props.children)}}]),i}(),K=function(e){if(!i(r.useContext))return console.warn("\n      [ReModulex Environment Waring] \n        'useContext' API is not supported by your React version.\n        YOU CAN NOT use 'useModules' api unless upgrade React\n    ");var t=r.useContext(U);return u(e,t)};e.createModule=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(P,[null].concat(t)))},e.mapModules=u,e.applyStore=w,e.ModuleProvider=Y,e.connectModules=function(o){return function(n){var e=r.forwardRef(function(t,r){return a.createElement(W,null,function(e){return a.createElement(n,y({},t,u(o,e),{ref:r}))})});return e.displayName="HOC-ReModulex("+l(n.displayName,n.name)+")",I(e,n)}},e.useModules=K,e.useModule=function(e){return m(K([e]),e)},Object.defineProperty(e,"__esModule",{value:!0})});
